
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://nruneberg.github.io/sscc-qc-basic/tutorial1/">
      
      
        <link rel="prev" href="../preparations/">
      
      
        <link rel="next" href="../tutorial2/">
      
      
      <link rel="icon" href="../img/CSC_logo_Brilliant_pysty_1riv_rgb.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Tutorial 1 - SSCC QC Basic</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#tutorial-1-basic-dft-calculations-using-tmolex-and-turbomole" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="SSCC QC Basic" class="md-header__button md-logo" aria-label="SSCC QC Basic" data-md-component="logo">
      
  <img src="../img/CSC_logo_Brilliant_pysty_1riv_rgb.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SSCC QC Basic
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Tutorial 1
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/nruneberg/sscc-qc-basic" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="SSCC QC Basic" class="md-nav__button md-logo" aria-label="SSCC QC Basic" data-md-component="logo">
      
  <img src="../img/CSC_logo_Brilliant_pysty_1riv_rgb.png" alt="logo">

    </a>
    SSCC QC Basic
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/nruneberg/sscc-qc-basic" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../preparations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Preparations
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Tutorial 1
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Tutorial 1
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tmolex-setup-at-csc" class="md-nav__link">
    <span class="md-ellipsis">
      TmoleX setup at CSC
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-1-optimize-the-ground-state-for-formaldehyde" class="md-nav__link">
    <span class="md-ellipsis">
      Task 1: Optimize the ground state for formaldehyde
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task 1: Optimize the ground state for formaldehyde">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#launch-tmolex-via-your-browser" class="md-nav__link">
    <span class="md-ellipsis">
      Launch TmoleX via your browser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-your-first-turbomole-job" class="md-nav__link">
    <span class="md-ellipsis">
      Define your first turbomole job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geometry-build-formaldehyde" class="md-nav__link">
    <span class="md-ellipsis">
      Geometry -- Build formaldehyde
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#atomic-attributes-select-basis-set" class="md-nav__link">
    <span class="md-ellipsis">
      Atomic Attributes: Select basis set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#molecular-attributes-generate-initial-guess-mos" class="md-nav__link">
    <span class="md-ellipsis">
      Molecular Attributes -- Generate initial guess MOs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-define-your-method" class="md-nav__link">
    <span class="md-ellipsis">
      Method -- Define your method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-job-define-your-job-type" class="md-nav__link">
    <span class="md-ellipsis">
      Start Job -- Define your job type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runnetwork-setup-remote-job" class="md-nav__link">
    <span class="md-ellipsis">
      Run(network) -- Setup remote job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#results-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Results -- structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#results-gradients" class="md-nav__link">
    <span class="md-ellipsis">
      Results -- Gradients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vibrational-spectrum" class="md-nav__link">
    <span class="md-ellipsis">
      Vibrational spectrum
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial 2
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tmolex-setup-at-csc" class="md-nav__link">
    <span class="md-ellipsis">
      TmoleX setup at CSC
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#task-1-optimize-the-ground-state-for-formaldehyde" class="md-nav__link">
    <span class="md-ellipsis">
      Task 1: Optimize the ground state for formaldehyde
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task 1: Optimize the ground state for formaldehyde">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#launch-tmolex-via-your-browser" class="md-nav__link">
    <span class="md-ellipsis">
      Launch TmoleX via your browser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#define-your-first-turbomole-job" class="md-nav__link">
    <span class="md-ellipsis">
      Define your first turbomole job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geometry-build-formaldehyde" class="md-nav__link">
    <span class="md-ellipsis">
      Geometry -- Build formaldehyde
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#atomic-attributes-select-basis-set" class="md-nav__link">
    <span class="md-ellipsis">
      Atomic Attributes: Select basis set
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#molecular-attributes-generate-initial-guess-mos" class="md-nav__link">
    <span class="md-ellipsis">
      Molecular Attributes -- Generate initial guess MOs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-define-your-method" class="md-nav__link">
    <span class="md-ellipsis">
      Method -- Define your method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-job-define-your-job-type" class="md-nav__link">
    <span class="md-ellipsis">
      Start Job -- Define your job type
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runnetwork-setup-remote-job" class="md-nav__link">
    <span class="md-ellipsis">
      Run(network) -- Setup remote job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#results-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Results -- structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#results-gradients" class="md-nav__link">
    <span class="md-ellipsis">
      Results -- Gradients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vibrational-spectrum" class="md-nav__link">
    <span class="md-ellipsis">
      Vibrational spectrum
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="tutorial-1-basic-dft-calculations-using-tmolex-and-turbomole">Tutorial 1: Basic DFT calculations using TmoleX and TURBOMOLE</h1>
<ul>
<li>Spring School on Computational Chemistry 23-25 April 2025</li>
<li>Nino Runeberg, CSC - IT center for Science Ltd, based on the earlier work of Atte Sillanpää</li>
</ul>
<h2 id="overview">Overview</h2>
<ol>
<li>TmoleX is a graphical user interface to set up, launch and run jobs with TURBOMOLE</li>
<li>This tutorial is made for use with TmoleX 24 and TUBOMOLE 7.8</li>
<li>We'll use TmoleX to set up a formaldehyde geometry optimization</li>
<li>Configure and submit the job to be run on puhti.csc.fi supercomputer</li>
<li>Perform a subsequent frequency calculation on the optimized structure</li>
<li>Visualize results</li>
</ol>
<h2 id="tmolex-setup-at-csc">TmoleX setup at CSC</h2>
<ul>
<li>TmoleX can be used either via a browser or by running it on your local 
  computer (see <a href="../preparations/">Preparations</a> )   </li>
<li>The model system and input parameters for the TUBOMOLE job are specified  using TmoleX</li>
<li>A connection to puhti.csc.fi is set up in TmoleX using ssh (Only passwordless ssh allowed)</li>
<li>Installation directory and supercomputer specific options are set in TmoleX so that the GUI can
  launch the job for the queueing system (SLURM) on the Puhti</li>
<li>TmoleX can follow the progress and once the job has completed, the results are retreived</li>
<li>The <a href="https://docs.csc.fi/apps/tmolex/">CSC TmoleX page</a> has more information </li>
<li>The overall CSC supercomputer environment can be found in the <a href="https://docs.csc.fi/computing/available-systems/">Docs CSC user guide</a>
  or in the <a href="https://csc-training.github.io/csc-env-eff/">CSC Computing environment self learning course materials</a>.</li>
<li>TURBOMOLE can also be used directly from the Puhti command line.</li>
</ul>
<div style="display: flex; gap: 20px; justify-content: space-between; align-items: flex-end;">
  <figure style="width: 45%; text-align: center; margin: 0;">
<a href="../img/tmolex-and-ood.svg" class="lightbox">
    <img src="../img/tmolex-and-ood.svg" alt="Using TmoleX via OOD" title="Using TmoleX via browser" style="width: 100%;">
    <figcaption>Using TmoleX via the browser</figcaption>
</a>
  </figure>
  <figure style="width: 45%; text-align: center; margin: 0;">
<a href="../img/tmolex-and-puhti_new.svg" class="lightbox">
    <img src="../img/tmolex-and-puhti_new.svg" alt="Using TmoleX locally" title="Using TmoleX locally over the network" style="width: 100%;">
    <figcaption>Using TmoleX from local pc</figcaption>
  </figure>
</a>

</div>

<p>The TURBOMOLE philosophy or program structure is based on running different
"modules" one after another. The following diagram
<a href="https://www.turbomole.org/wp-content/uploads/2019/10/Tutorial_7-4.pdf">taken from a TURBOMOLE tutorial</a>
highlights the most typical ones and their relation.</p>
<p><img alt="&quot;TURBOMOLE modules&quot;" src="../img/tmoleDefineFlow.png" title="TURBOMOLE modules" /></p>
<h2 id="task-1-optimize-the-ground-state-for-formaldehyde">Task 1: Optimize the ground state for formaldehyde</h2>
<p>We need an initial guess for the geometry specifying the 3N-6 internal
nuclear coordinates. This initial structure place the system on the
energy surface that is uniquely defined by the computational model
we are going to use (B-O approx.).  The performance of the model
often vary at different parts of the surface.</p>
<p><a href="../img/pesurf.png"><img alt="Potential energy surface" src="../img/pesurf.png" title="potential energy surface" /></a></p>
<h3 id="launch-tmolex-via-your-browser">Launch TmoleX via your browser</h3>
<p>Go to <a href="https://puhti.csc.fi/">puhti.csc.fi</a> using a web browser and login using
your CSC/Haka user account.</p>
<ol>
<li>From there <a href="https://docs.csc.fi/computing/webinterface/desktop/#launching">launch a Desktop</a>. </li>
<li>Open a <code>Terminal</code> and load the TURBOMOLE module <code>module load turbomole/7.8</code>.</li>
<li>Start TmoleX with the command <code>TmoleX24</code>.
<a href="../img/ood_03.png"><img alt="&quot;Launch Tmolex24&quot;" src="../img/ood_03.png" /></a></li>
<li>Select <code>New Project</code> and define a suitable project in the <code>File Name</code> slot
   (e.g. <code>/scratch/project_2013760/&lt;your-username&gt;/qc_tutorial1</code>).
<a href="../img/ood_04.png"><img alt="&quot;Tmolex24 new project&quot;" src="../img/ood_04.png" /></a></li>
<li>Define your system and type of calculation. </li>
<li>Small jobs can be run interactively: Start Job -&gt; Run (local)</li>
<li>Larger jobs should be run as batch jobs: Start Job -&gt; Run (network). Example
   settings are given below. Note that passwordless connection doesn't work via
   the browser. Remember to save the settings using <code>Save Machine</code>.</li>
</ol>
<p><a href="../img/local_1.png"><img alt="&quot;Launch TmoleX GUI&quot;" src="../img/local_1.png" /></a></p>
<h3 id="define-your-first-turbomole-job">Define your first turbomole job</h3>
<p><a href="../img/local_2.png"><img alt="&quot;TmoleX steps&quot;" src="../img/local_2.png" /></a></p>
<p>A complete Turbomole job comprises the sequence:</p>
<ul>
<li><strong>Geometry - Atomic Attributes - Molecular Attributes - Method - Start Job - Results</strong></li>
</ul>
<h3 id="geometry-build-formaldehyde"><strong>Geometry</strong> -- Build formaldehyde</h3>
<p>Open the 3D builder, right-click on canvas and load formaldehyde from the library
<a href="../img/local_3.png"><img alt="&quot;update&quot;" src="../img/local_3.png" /></a></p>
<p>Close the builder and continue to Atomic Attributes</p>
<h3 id="atomic-attributes-select-basis-set">Atomic Attributes: Select basis set</h3>
<p>Select the default def-SV(P) basis set</p>
<p><a href="../img/local_4.png"><img alt="&quot;update&quot;" src="../img/local_4.png" /></a>   </p>
<p>Continue to Molecular Attributes</p>
<h3 id="molecular-attributes-generate-initial-guess-mos">Molecular Attributes -- Generate initial guess MOs</h3>
<p>Generate initial MOs by doing an extended Hückel calculation</p>
<p><a href="../img/local_5.png"><img alt="&quot;update&quot;" src="../img/local_5.png" /></a></p>
<p>Continue to Method</p>
<h3 id="method-define-your-method">Method -- Define your method</h3>
<p>Select the default method (ri-dft BP86/m3)</p>
<p><a href="../img/local_6.png"><img alt="&quot;update&quot;" src="../img/local_6.png" /></a></p>
<p>Continue to Start Job</p>
<h3 id="start-job-define-your-job-type">Start Job -- Define your job type</h3>
<p>We want to do a geometry optimization of the ground state.</p>
<p><a href="../img/local_7.png"><img alt="&quot;update&quot;" src="../img/local_7.png" /></a></p>
<p>Smaller jobs can be run directly, <code>Run (local)</code>, but for larger jobs we should reserve
resourses via the queuing system.  Continue to <code>Run (network)</code></p>
<h3 id="runnetwork-setup-remote-job">Run(network) -- Setup remote job</h3>
<p>Click <strong>Save</strong> as the first dialog prompts for the folder to use for the job files.
<a href="../img/local_8.png"><img alt="&quot;update&quot;" src="../img/local_8.png" /></a></p>
<p>In the new dialog, we define the remote (Puhti) configuration:</p>
<ul>
<li>Which user account and project to use</li>
<li>Where TURBOMOLE is installed etc.</li>
<li>What type of resources we want to use for this job</li>
</ul>
<p>TURBOMOLE can be run in parallel either via a shared memory approach (SMP, only within a single node) or 
by using MPI parallelization (possible to run a job over several nodes). In this tutorial we will use the SMP version.</p>
<p>Smaller jobs can be run directly (<code>Run (local)</code>), but for larger jobs we should reserve<br />
resourses via the queuing system. 
<a href="../img/tmolex_7.png"><img alt=" Prepare batch queue" src="../img/tmolex_7.png" /></a></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use the Desktop Clipboard to easily copy content between the notes and the Desktop environment.</p>
</div>
<ol>
<li>The Machine is called <code>puhti-login12.bullx</code></li>
<li><code>User</code> is your CSC username, <code>Group name</code> and <code>Identification</code> are just tags you can set to distinguish different configurations</li>
<li>Tick <code>Expert settings</code>and <code>no password</code>.<ul>
<li>Check that the access works by clicking <code>Check Password Settings</code> </li>
</ul>
</li>
<li>Work directory is a place where temporary files are stored:
   <code>/scratch/project_2013760/&lt;your-username&gt;/TM_TMPDIR</code> </li>
<li>TURBOMOLE directory should point to were it's installed:
   <code>/appl/soft/chem/turbomole/7.8/TURBOMOLE</code></li>
<li>Tick <code>Use queuing system</code></li>
<li>Submit with <code>sbatch</code> and Check status with  <code>squeue -u $USER</code></li>
<li>Untick <code>add PARA_ARCH</code> and <code>add PARNODES</code>    </li>
<li>In the field "Script before job execution" add:</li>
</ol>
<p><div class="highlight"><pre><span></span><code><span class="c1">#SBATCH --reservation=sscc_thu_small                  # resource reservation for school</span>
<span class="c1">#SBATCH --partition=small                             # queue</span>
<span class="c1">#SBATCH --nodes=1                                     # for SMP only 1 is possible</span>
<span class="c1">#SBATCH --cpus-per-task=4                             # SMP threads</span>
<span class="c1">#SBATCH --account=project_2013760                     # insert here the project to be billed</span>
<span class="c1">#SBATCH --time=00:30:00                               # time as `hh:mm:ss`</span>
<span class="nb">source</span><span class="w"> </span>/appl/profile/zz-csc-env.sh
<span class="nb">ulimit</span><span class="w"> </span>-s<span class="w"> </span>unlimited
<span class="nb">export</span><span class="w"> </span><span class="nv">PARA_ARCH</span><span class="o">=</span>SMP<span class="w">                                  </span><span class="c1"># use SMP threads</span>
module<span class="w"> </span>load<span class="w"> </span>turbomole/7.8
<span class="nb">export</span><span class="w"> </span><span class="nv">PARNODES</span><span class="o">=</span><span class="nv">$SLURM_CPUS_PER_TASK</span><span class="w">                  </span><span class="c1"># for SMP</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$TURBODIR</span>/bin/<span class="sb">`</span><span class="nv">$TURBODIR</span>/scripts/sysname<span class="sb">`</span>:<span class="nv">$PATH</span>
</code></pre></div>
*  <strong>Remember to save save the settings using <code>Save Machine</code>.</strong> <br />
<em>   Click </em><em>Start Job</em>* at the bottom right</p>
<ul>
<li>For this tutorial, the default 1 minute interval to ping Puhti for the job status is ok, but for actual production jobs, that could be increased to e.g. 1 hour. The status can always be refreshed manually. This job should finish in seconds.</li>
</ul>
<p><a href="../img/local_12.png"><img alt="&quot;update&quot;" src="../img/local_12.png" /></a></p>
<h3 id="results-structure">Results -- structure</h3>
<p>The geometry optimization needed 5 cycles to reach the stationary point on the energy surface.</p>
<p><a href="../img/local_13.png"><img alt="&quot;Optimized geometry&quot;" src="../img/local_13.png" /></a></p>
<h3 id="results-gradients">Results -- Gradients</h3>
<p>The length of the arrows show how steep the energy surface is in that direction</p>
<p><a href="../img/local_14.png"><img alt="&quot;update&quot;" src="../img/local_14.png" /></a></p>
<p>At the end of the geometry optimization we have reached a stationary point
(gradient smaller than a given threshold) that could correspond to:</p>
<p><a href="../img/stationaryPoints.png" title="Stationary points on potential energy surface"><img alt="&quot;Stationary points on potential energy surface&quot;" src="../img/stationaryPoints.png" title="Stationary points on potential energy surface" /></a></p>
<ul>
<li>a minimum <strong>A</strong></li>
<li>inflection point <strong>B</strong></li>
<li>a maximum <strong>C</strong></li>
</ul>
<p>The nature of the stationary point can be deduced from the curvature (Hessian).
A positive curvature corresponds to a minimum, a negative to a maximum.</p>
<h3 id="vibrational-spectrum">Vibrational spectrum</h3>
<p>In order to verify that the stationary point is a true minimum
(positive curvature in all directions = real frequencies)</p>
<p>Start a frequency calculation (Reuse data by just hitting <code>Start new job with current data</code> )</p>
<p><img alt="&quot;Start new job from previous results&quot;" src="../img/local_16.png" /></p>
<p>In the "Job typ" list select "Spectra &amp; Excited States --&gt; IR &amp; vibrational frequencies"</p>
<p>Select "Run (Network)" to launch the job.</p>
<p>From your <code>ProjectList</code>, you can select a job from a project to monitor its progress. You can refresh the view, 
but please be patient as the data may take a moment to update.
You can also open a separate terminal in the job’s directory (right-click on the job → Open Shell) and check the
job status directly using Slurm commands, for example:</p>
<p><div class="highlight"><pre><span></span><code>squeue<span class="w"> </span>-u<span class="w"> </span><span class="nv">$USER</span><span class="w"> </span><span class="c1"># my current running or queuing jobs</span>
sacct<span class="w">           </span><span class="c1"># my ended jobs for the last day</span>
sacct<span class="w"> </span>-X<span class="w"> </span>-o<span class="w"> </span>jobid,start,jobname,state,elapsed,alloc<span class="w"> </span><span class="c1"># last jobs with custom fields</span>
</code></pre></div>
More on these in <a href="https://csc-training.github.io/csc-env-eff/hands-on/batch_resources/tutorial_sacct_and_seff.html">CSC Computing Environment self learning materials</a></p>
<p>A local terminal on Puhti also gives access to some additional tools and scripts
that come with TURBOMOLE that can be nice to follow or post process the data. You
can find these e.g.</p>
<div class="highlight"><pre><span></span><code>module<span class="w"> </span>load<span class="w"> </span>turbomole/7.8
ls<span class="w"> </span><span class="nv">$TURBODIR</span>/scripts/
cgnce<span class="w"> </span>-h<span class="w"> </span><span class="c1"># to get help on usage</span>
actual<span class="w"> </span>-h<span class="w"> </span>
</code></pre></div>
<p>Once the job has finished we note that all calculated frequencies are real, indicating that the structure corresponds to a true minimum.</p>
<p><a href="../img/local_19.png"><img alt="&quot;Frequency calculation results&quot;" src="../img/local_19.png" /></a></p>
<p>The zero Kelvin minimum energy structure in a vacuum is often the starting point in solving
chemical problems. It often represents surprisingly well the molecular properties despite
all the approximations made. What could you use this information for? How to validate or improve
the model?</p>
<p>This ends the tutorial.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "search.highlight", "search.filters", "lightbox"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>